import{d as $,e as A,q as N,A as U,o as u,a as k,j as h,n as j,B as M,b as S,t as d,h as p,w as e,F as g,i as _,_ as I,k as n,l as i,x as B,C as F,D as q}from"./index-1833767a.js";const z=["title"],E=$({__name:"StreamTrackSetup",props:{track:{default:void 0}},emits:["change"],setup(o,{emit:w}){const y=o,{track:m}=A(y),C=N([{label:"曝光模式",key:"exposureMode",disabled:!1,value:null},{label:"曝光时间",key:"exposureTime",disabled:!1,value:null},{label:"曝光补偿",key:"exposureCompensation",disabled:!1,value:null},{label:"亮度",key:"brightness",disabled:!1,value:null},{label:"白平衡模式",key:"whiteBalanceMode",disabled:!1,value:null},{label:"平移",key:"pan",disabled:!1,value:null},{label:"倾斜",key:"tilt",disabled:!1,value:null},{label:"变焦",key:"zoom",disabled:!1,value:null}]);U(m,()=>{if(!m.value)return;const a=m.value.getCapabilities(),r=m.value.getSettings();for(const s of C){if(s.disabled=!(s.key in r),!(s.key in r)){console.log(`Camera does not support ${s.key}.`);continue}s.value=r[s.key],Array.isArray(a[s.key])?s.options=a[s.key]:Object.assign(s,a[s.key])}},{immediate:!0});const x=a=>{const r=[{[a.key]:a.value}];m.value.applyConstraints({advanced:r}).then(()=>{console.log("Did successfully apply new constraints: ",{advanced:r}),console.log("New settings: ",m.value.getSettings())}).catch(s=>{console.error("applyConstraints() failed: ",s)})};return(a,r)=>{const s=_("el-option"),V=_("el-select"),f=_("el-slider");return u(!0),k(g,null,h(C,(t,D)=>j((u(),k("div",{class:"h-justify__left mt-10",key:D},[S("span",{class:"title mr-20",title:t.key},d(t.label),9,z),t.options instanceof Array?(u(),p(V,{key:0,modelValue:t.value,"onUpdate:modelValue":c=>t.value=c,class:"m-2",onChange:c=>x(t)},{default:e(()=>[(u(!0),k(g,null,h(t.options,c=>(u(),p(s,{key:c,label:c,value:c},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])):(u(),p(f,{key:1,min:t.min,max:t.max,modelValue:t.value,"onUpdate:modelValue":c=>t.value=c,onChange:c=>x(t)},null,8,["min","max","modelValue","onUpdate:modelValue","onChange"]))])),[[M,!t.disabled]])),128)}}});const H=I(E,[["__scopeId","data-v-ee7bdd66"]]);const L={name:"StreamTracks",components:{StreamTrackSetup:H},props:{value:{type:MediaStream,default:null},edited:{type:Boolean,default:!1}},data(){return{id:null,tableData:[]}},watch:{value(o){this.id=o.id,this.tableData=[],this.tableData=this.tableData.concat(o.getVideoTracks(),o.getAudioTracks())}},methods:{removeTrack(o){this.value&&(o.stop(),this.value.removeTrack(o),console.log("remove track id",o.label,o.id),this.$emit("input",this.value))}}},T=o=>(F("data-v-720dbce4"),o=o(),q(),o),O=T(()=>S("h4",null,"Base:",-1)),R=T(()=>S("h4",null,"Constraints:",-1)),G=T(()=>S("h4",null,"Settings:",-1)),J=T(()=>S("h4",null,"Capabilities:",-1));function K(o,w,y,m,C,x){const a=_("el-table-column"),r=_("el-link"),s=_("el-tooltip"),V=_("StreamTrackSetup"),f=_("el-col"),t=_("el-row"),D=_("el-main"),c=_("el-table");return u(),p(c,{data:C.tableData,stripe:""},{default:e(()=>[n(a,{label:"媒体流ID"},{default:e(()=>[n(a,{label:"名称"},{default:e(({row:l})=>[i(d(l.label.substr(0,8))+"... ",1)]),_:1})]),_:1}),n(a,{label:y.value&&y.value.id},{default:e(()=>[n(a,{prop:"kind",label:"类型"}),n(a,{label:"id"},{default:e(({row:l})=>[i(d(l.id.substr(0,8))+"... ",1)]),_:1}),n(a,{label:"state"},{default:e(({row:l})=>[i(d(l.readyState),1)]),_:1}),n(a,{label:"enabled"},{default:e(({row:l})=>[i(d(l.enabled),1)]),_:1}),n(a,{label:"muted"},{default:e(({row:l})=>[i(d(l.muted),1)]),_:1}),y.edited?(u(),p(a,{key:0,label:"操作"},{default:e(({row:l})=>[n(s,{class:"item",content:"移除轨道",placement:"top"},{default:e(()=>[n(r,{class:"el-icon-minus",onClick:v=>x.removeTrack(l)},{default:e(()=>[i("移除")]),_:2},1032,["onClick"])]),_:2},1024)]),_:1})):B("",!0),n(a,{type:"expand"},{default:e(({row:l})=>[l.kind==="video"?(u(),p(V,{key:0,track:l},null,8,["track"])):B("",!0),n(D,{class:"table-expand"},{default:e(()=>[O,n(t,null,{default:e(()=>[n(f,{span:12},{default:e(()=>[i("label: "+d(l.label),1)]),_:2},1024),n(f,{span:12},{default:e(()=>[i("ID: "+d(l.id),1)]),_:2},1024)]),_:2},1024),R,n(t,null,{default:e(()=>[(u(!0),k(g,null,h(l.getConstraints(),(v,b)=>(u(),p(f,{key:b,span:12},{default:e(()=>[i(d(b)+" : "+d(v),1)]),_:2},1024))),128))]),_:2},1024),G,n(t,null,{default:e(()=>[(u(!0),k(g,null,h(l.getSettings(),(v,b)=>(u(),p(f,{key:b,span:12},{default:e(()=>[i(d(b)+" : "+d(v),1)]),_:2},1024))),128))]),_:2},1024),J,n(t,null,{default:e(()=>[(u(!0),k(g,null,h(l.getCapabilities(),(v,b)=>(u(),p(f,{key:b,span:12},{default:e(()=>[i(d(b)+" : "+d(v),1)]),_:2},1024))),128))]),_:2},1024)]),_:2},1024)]),_:1})]),_:1},8,["label"])]),_:1},8,["data"])}const Q=I(L,[["render",K],["__scopeId","data-v-720dbce4"]]);export{Q as S};
