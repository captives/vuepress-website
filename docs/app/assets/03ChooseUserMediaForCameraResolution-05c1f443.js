import{_ as N}from"./WebRTC.vue_vue_type_script_setup_true_lang-933a8b67.js";import{S as z}from"./StreamPlayer-0a851912.js";import{S as E}from"./StreamTracks-c1359b8a.js";import{_ as L}from"./MediaError.vue_vue_type_script_setup_true_lang-7241cc78.js";import{d as j,f as d,o as h,h as y,w as o,k as t,l as c,b as A,a as U,j as S,F as I,i,_ as D}from"./index-1833767a.js";import"./webrtc-841bc7c7.js";const G={class:"h-justify__align"},$=j({__name:"03ChooseUserMediaForCameraResolution",setup(J){const m=d(),u=d(),v=d(),p=d(0),f=d(!1),g=d(!1),w=[{label:"QVGA",width:"320",height:"240"},{label:"VGA",width:"640",height:"480"},{label:"HD",width:"1280",height:"720"},{label:"FHD",width:"1920",height:"1080"},{label:"2K",width:"1920",height:"1080"},{label:"电视 4K",width:"3840",height:"2160"},{label:"电影 4K ",width:"4096",height:"2160"},{label:"8K ",width:"7680",height:"4320"}],_=d(-1),F=(a,e)=>{console.log("stream player completed",a),_.value=0,b()},H=a=>{v.value=a,a.getVideoTracks().forEach(n=>{const s=n.getConstraints();console.log("Result constraints: "+JSON.stringify(s)),s&&s.width&&(p.value=typeof s.width=="number"?s.width:s.width.exact||s.width.min||0)})},M=()=>{var e,n;const a={audio:!1,video:u.value?{deviceId:{exact:u.value},width:{exact:720},height:{exact:405}}:!1};(e=m.value)==null||e.close(),(n=m.value)==null||n.getUserMedia(a)},b=()=>{var e,n;(e=v.value)==null||e.getTracks().forEach(s=>{s.stop()});const a=w[_.value];(n=m.value)==null||n.getUserMedia({audio:!1,video:{deviceId:{exact:u.value},width:{exact:a.width},height:{exact:a.height}}}),console.log("选择",a.label,"width: %s, height: %s",a.width,a.height)};return(a,e)=>{const n=i("el-divider"),s=i("el-col"),R=i("el-slider"),k=i("el-checkbox"),T=i("el-link"),B=i("el-row"),V=i("el-option"),x=i("el-select"),K=i("el-space");return h(),y(N,{ref_key:"webrtc",ref:m,title:"使用摄像头约束",onCompleted:F,onStream:H},{video:o(({stream:r})=>[t(B,{gutter:50},{default:o(()=>[t(s,{class:"center",xs:24,sm:24,md:12},{default:o(()=>[t(n,{"content-position":"left"},{default:o(()=>[c("User media")]),_:1}),t(z,{stream:r,autoplay:!0},null,8,["stream"])]),_:2},1024),t(s,{class:"center",xs:24,sm:24,md:12},{default:o(()=>[t(n,{"content-position":"left"},{default:o(()=>[c("Track")]),_:1}),t(E,{value:r,class:"mt-20"},null,8,["value"]),t(n,{"content-position":"left",class:"mt-20"},{default:o(()=>[c("Setup")]),_:1}),t(R,{modelValue:p.value,"onUpdate:modelValue":e[0]||(e[0]=l=>p.value=l),min:0,max:7680,style:{width:"220px"}},null,8,["modelValue"]),A("div",G,[t(k,{modelValue:f.value,"onUpdate:modelValue":e[1]||(e[1]=l=>f.value=l)},{default:o(()=>[c("Lock video size")]),_:1},8,["modelValue"]),t(k,{modelValue:g.value,"onUpdate:modelValue":e[2]||(e[2]=l=>g.value=l)},{default:o(()=>[c("Lock aspect ratio")]),_:1},8,["modelValue"]),t(T,{href:"https://webrtc.github.io/samples/src/content/getusermedia/resolution/",target:"_blank"},{default:o(()=>[c("查看更多")]),_:1})])]),_:2},1024)]),_:2},1024)]),error:o(({data:r})=>[t(L,{error:r.error},null,8,["error"])]),list:o(({data:r})=>[t(K,{size:50,class:"mb-20"},{default:o(()=>[t(x,{modelValue:u.value,"onUpdate:modelValue":e[3]||(e[3]=l=>u.value=l),placeholder:"请选择摄像头",onChange:M},{default:o(()=>[(h(!0),U(I,null,S(r.videoInput,l=>(h(),y(V,{key:l.deviceId,label:l.label,value:l.deviceId},null,8,["label","value"]))),128))]),_:2},1032,["modelValue"]),t(x,{modelValue:_.value,"onUpdate:modelValue":e[4]||(e[4]=l=>_.value=l),placeholder:"请选择分辨率",onChange:b},{default:o(()=>[(h(),U(I,null,S(w,(l,C)=>t(V,{key:C,label:l.label,value:C},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:2},1024)]),_:1},512)}}});const Y=D($,[["__scopeId","data-v-97a9a014"]]);export{Y as default};
